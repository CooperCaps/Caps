<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Working Fallout New Vegas Pip-Boy (Bootstrap)</title>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css'><link rel="stylesheet" href="./style.css">
  <script src="https://cdn.jsdelivr.net/npm/web3@1.5.0/dist/web3.min.js"></script>
</head>
<body>

  <!-- partial:index.partial.html -->
  <img src="pipboy.png" alt="Overlay Image" class="overlay-image">

  <div id="frame" class="frame">
    <div class="piece output container">
      <div class="pipboy">
        <ul class="pip-foot">
          <li class="active"><a href="#items" data-toggle="tab">Items</a></li>
          <li><a href="#stats" data-toggle="tab">Stake</a></li>
          <li><a href="#quests" data-toggle="tab">Swap</a></li>
          <li><a href="#misc" data-toggle="tab">Misc</a></li>
          <li><a href="#radio" data-toggle="tab">Radio</a></li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane fade in active" id="items">
            <h3 class="pip-title">Items</h3>
            <ul class="pip-head">
              <li><b>Address</b> <span id="address" onclick="connectWallet()">CONNECT</span></li>
              <li><b>HP</b> ???</li>
              <li><span class="fade-a"><b>DT</b> ???</span><span class="fade-b"><b>DR</b> ???</span></li>
              <li><b>Caps</b> <span id="capsBalance">0</span></li> <!-- Updated element -->
            </ul>
            <div class="pip-body">
              <ul class="options">
                <li class="disabled"><input type="radio" id="radio1" name="radio">
                  <label for="radio1">Brass Knuckles </label>
                </li>
                <li class="disabled"><input type="radio" checked="checked" id="radio2" name="radio">
                  <label for="radio2">Hunting Rifle</label>
                </li>
                <li class="disabled"><input type="radio" id="radio3" name="radio">
                  <label for="radio3">Long Fuse Dynamite (11)</label>
                </li>
                <li class="disabled"><input type="radio" id="radio4" name="radio">
                  <label for="radio4">Plasma Pistol <label>
                </li>
              </ul>
              <div class="info">
                <div class="right-options">
                  <a href="#" class="disabled">Mint NFT</a>
                </div>
                <div class="info-body">
                  <ul class="info-table">
                    <li class="vboy-wrap">
                      <div class="item-icon"><span class="icon"><img class="filter" src="https://cybersandbox.ca/resources/556mm_round_icon.png"></span>0</div>
                      <div class="vboy filter"></div>
                    </li>
                    <li><b>STR</b> ???</li>
                    <li class="clear"><span class="fade-a"><b>DAM</b> ???</span><span class="fade-b"><b>DPS</b> ???</span></li>
                    <li><b>WG</b> ???</li>
                    <li><b>VAL</b> ???</li>
                    <li><b>CND</b> <span class="condition"><span class="fill" style="width: 83%;"></span></span></li>
                    <li class="span-2">No Ammo</li>
                  </ul>
                  <p class="extra"><b>MODS</b> ???</p>
                </div>
              </div>
            </div>
          </div>
          <!-- Other tab content... -->
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Custom CSS styles */
    #musicPlayer {
      display: none;
    }
  </style>

  <div class="tab-pane fade" id="radio">
    <h3 class="pip-title">Radio</h3>
    <div class="pip-body">
      <ul class="options">
        <!-- Add more songs as needed -->
        <li><input type="checkbox" id="song1"><label for="song1">Accentuate The Positive</label></li>
        <li><input type="checkbox" id="song2"><label for="song2">Atom Bomb Baby</label></li>
        <li><input type="checkbox" id="song3"><label for="song3">Youre A Grand Old Flag</label></li>
        <li><input type="checkbox" id="song4"><label for="song4">Uranium Fever</label></li>
        <li><input type="checkbox" id="disabled"><label for="disabled" class="disabled">//Null</label></li>
        <li><input type="checkbox" id="disabled"><label for="disabled" class="disabled">//Null</label></li>
      </ul>
      <div class="info">
        <audio id="musicPlayer" controls>
          <source src="" type="audio/mp3">
          Your browser does not support the audio element.
        </audio>
      </div>
    </div>
  </div>

  <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
  <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js'></script>
  <script src="./script.js"></script>
  <script>
    // JavaScript code
    const musicPlayer = document.getElementById('musicPlayer');
    const songs = {
      'song1': 'Johnny Mercer  Accentuate The Positive.mp3',
      'song2': 'AtomBombBaby.mp3',
      'song3': 'Billy Murray  Youre A Grand Old Flag Bioshock Infinite Debut Trailer.mp3',
      'song4': 'Elton Britt  Uranium Fever.mp3'
    };

    // Function to play a selected song
    function playSong(songId) {
      if (songs[songId]) {
        musicPlayer.src = songs[songId];
        musicPlayer.play();
      }
    }

    // Event listener for song selection
    document.querySelectorAll('.options input[type="checkbox"]').forEach(input => {
      input.addEventListener('change', () => {
        if (input.checked) {
          playSong(input.id);
        } else {
          musicPlayer.pause();
        }
      });
    });
  </script>

  <script>
    // Initialize Web3
    const web3 = new Web3(window.ethereum);

    // Contract address and ABI for the token
    const tokenAddress = '0x0F7A8a7DFDc56dA7F9185e110Eb55Fc7CaCC5c06';
    const tokenABI = [{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];

    // Instantiate the contract
    const tokenContract = new web3.eth.Contract(tokenABI, tokenAddress);

    // Function to update wallet information
    function updateWalletInfo(address) {
      const addressElement = document.getElementById('address');
      addressElement.textContent = address.slice(0, 6) + '....' + address.slice(-6);
    }

    // Function to get token balance
    async function getTokenBalance() {
      try {
        // Request account access if not already granted
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        const userAddress = accounts[0]; // Get the first account
        updateWalletInfo(userAddress);

        // Get token balance using balanceOf function
        const balance = await tokenContract.methods.balanceOf(userAddress).call();
        const formattedBalance = web3.utils.fromWei(balance, 'ether');

        // Update token balance next to "Caps"
        const tokenBalanceElement = document.getElementById('capsBalance');
        tokenBalanceElement.textContent = formattedBalance;
      } catch (error) {
        console.error('Error:', error);
      }
    }

    // Function to connect wallet
    function connectWallet() {
      // Check if Web3 is injected by MetaMask
      if (typeof window.ethereum !== 'undefined') {
        getTokenBalance(); // Call the function to get token balance
      } else {
        console.error('MetaMask is not installed');
      }
    }
  </script>
</body>
</html>
